<body>
<div class="container d-flex justify-content-center" *ngIf="userLoginOn==true">

  <div class="col-md-12">
    <div class="card">
      <div class="comment-widgets m-b-20 ">
        <div class="d-flex flex-row comment-row">
          <div class="p-2 ">
                            <span class="round border-primary">
                            </span>
          </div>
          <div class="d-flex flex-column justify-content-center comment-text w-100">
            <p class="mt-3">{{hiloEncontrado?.usuario?.user}} - creado el {{hiloEncontrado?.fechaCreacion}}</p>
            <p class="h3 mb-2">{{hiloEncontrado?.titulo}}</p>
            <p class="mb-0">{{hiloEncontrado?.mensaje}}</p>
          </div>
        </div>
      </div>
      <div class="comment-widgets mb-20">
        <div class="d-flex flex-row comment-row">
          <div class="d-flex flex-column justify-content-center comment-text w-100">
            <div class="form-floating">
              <form [formGroup]="createComentarioForm">
                <textarea formControlName="mensaje" class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px" [(ngModel)]="comentario.mensaje"></textarea>
                <label for="floatingTextarea2" class="mt-3">Redacta tu respuesta.</label>
                <div *ngIf="message.invalid && (message.dirty || message.touched)" class="text-danger">
                  <div *ngIf="message.errors?.['required']">
                    El mensaje es obligatorio
                  </div>
                  <div *ngIf="createComentarioForm.get('mensaje')?.hasError('maxlength')">
                    El mensaje puede tener un máximo de 200 carácteres.
                  </div>
                </div>
                <button type="button" class="btn btn-primary float-end mt-2 " style="margin-right: 10px; " (click)="saveComentario()">Comentar</button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex flex-row comment-row comentario" *ngFor="let comentario of filterComentarios()">
        <div class="p-5">
          <div class="comment-text active w-100">
            <h5>{{comentario.userSerializer.user}}</h5>
            <div class="comment-footer">
              <span class="date">{{comentario.fechaCreacion}}</span>
            </div>
            <p class="m-b-5 m-t-10">{{comentario.mensaje}}</p>
          </div>

          <a data-abc="true" (click)="puntos(1)"><i class="fas fa-thumbs-up"></i> Fue de ayuda +1</a>

          <a data-abc="true" (click)="puntos(5)"><i class="fas fa-star" id="estrella">Agradecido contigo +5</i></a>

        </div>
      </div>
    </div>

  </div>
</div>

<div *ngIf="userLoginOn==false">
  <div class="body-secundario">
    <div class="login-container">
      <img src="/assets/images/robot.jpg"><br>
      <h3 class="text-center text-primary iniciarsesion-title">¡Vaya! Al parecer estás intentando entrar a la página</h3>
      <p class="text-center text-black">Lo siento, no te has autenticado. Autentícate para que puedas tener acceso a Learnsync.</p>
    </div>
  </div>
</div>
</body>
